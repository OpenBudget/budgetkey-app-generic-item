<div class='soproc-header' [style.top]='stickyTop()' [class.sticky-filters]='sticky'>
    <div class='soproc-bg'></div>
    <h1>מפתח לרכש החברתי - בהרצה, נתונים לא סופיים</h1>

    <div class='page-links'>
        <a *ngFor='let link of PAGE_LINKS' [href]='link.href + "?theme=soproc"' [class.active]='item.breadcrumbs === link.title'>{{ link.title }}</a>
    </div>

    <div class='intro' *ngIf="!item.office">
        <p>
            מידי שנה מספקים המשרדים החברתיים מאות שירותים חברתיים באמצעות מפעילים חיצוניים (מיקור חוץ). באילו שירותים מדובר? למי הם מיועדים? מי מספק אותם בפועל? מהם ההליכים המכרזיים שבמסגרתם הם מסופקים? מהן מגמות השינוי בהספקת השירותים לאורך השנים? גללו ומצאו.
        </p>
        <p>
            ניתן לבחון את תמונת המאקרו, להיכנס לעמוד של כל אחד משלושת המשרדים החברתיים לקבלת התמונה הספציפית אליו, ולהעמיק בעמוד של כל שירות חברתי.
        </p>
        <a href='/about?theme=soproc'>למידע נוסף על מהם שירותים חברתיים במיקור חוץ</a>
    </div>        


    <div class='well filters-wrapper' #filtersElement>
        <div class='filters'>
            <div class='filter' *ngFor='let filter of PAGE_FILTERS'>
                <label [for]='filter.id' *ngIf='!filter.tooltip'>{{ filter.title }}</label>
                <label [for]='filter.id' *ngIf='filter.tooltip' class='bk-tooltip-anchor'>{{ filter.title }}<span class='bk-tooltip'>{{ filter.tooltip }}</span></label>
                <budgetkey-multi-select [(value)]='filters[filter.id]' (valueChange)='filtersChanged()' [id]='filter.id' [options]='parameters[filter.id]'></budgetkey-multi-select>
            </div>
            <div class='filter' *ngIf='subunits'>
                <label>מנהל/אגף</label>
                <select [(ngModel)]='item.unit' (change)='processLevel(); filtersChanged()'>
                    <option value='' selected>הכל</option>
                    <option *ngFor='let option of subunits' [value]='option'>{{option}}</option>
                </select>
            </div>
        </div>
    </div>
    <a class='clear-filters' (click)='clearFilters()'>ניקוי כל הסינונים</a>
</div>

<div class='tab-selectors' #tabs>
    <a [class.active]='currentTab === "services"' (activated)='currentTab = "services"' tabindex='0' clickOnReturn>תמונת השירותים</a>
    <a [class.active]='currentTab === "suppliers"' (activated)='currentTab = "suppliers"' tabindex='0' clickOnReturn>הרחבה לגבי מפעילי השירותים</a>
</div>

<div class='charts columns-2'>
    <ng-container *ngFor='let ct of chartTemplates'>
        <ng-container *ngIf='charts[ct.id] && currentTab === ct.location'>
            <div class='single-chart'>
                <div class='chart-title' [innerHtml]='processTitles(ct)'></div>
                <div class='chart-subtitle'>{{ct._subtitle}}</div>
                <budgetkey-chart-plotly [layout]='charts[ct.id].layout' [data]='charts[ct.id].data'></budgetkey-chart-plotly>
            </div>
        </ng-container>
    </ng-container>    
</div>

<soproc-data-table *ngIf='colorscheme | async' [tables]='tables' [default]='"services"' [replacements]='replacements' [filename]='item.page_title' [item]='item'></soproc-data-table>